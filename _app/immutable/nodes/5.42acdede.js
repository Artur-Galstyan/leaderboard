import{S as Oe,i as Ue,s as He,a as L,k as g,q as X,y as te,c as V,l as y,m as E,h as o,r as Z,W as qe,z as le,n as c,X as me,R as re,b as w,C as _,A as ae,D as ue,d as K,f as Me,g as W,B as se,G as Ye,H as _e,o as ze,J as Q,Y as Ge,Z as Pe,e as $e,_ as Fe,v as Je,w as Ce,O as Ie,P as ce,F as ne}from"../chunks/index.487cb5f4.js";import{p as Ke}from"../chunks/stores.fa56da23.js";import{A as We,a as Xe,b as Ze,c as Qe,S as xe,j as et,e as he,s as ve,d as tt,p as Ne,f as lt,T as at,g as we,h as st,D as rt}from"../chunks/tabulator_esm.3508ef5c.js";import{a as G,c as Te,t as pe,n as nt}from"../chunks/lastParsedTable.d361524a.js";import{m as Le}from"../chunks/marked.esm.8a49593e.js";import{f as be}from"../chunks/index.c71e4220.js";const{document:Ve}=Ge;function ot(r){let t,l,s,a,d,b,f,$=r[2]&&!r[2].includes("404"),C,U,k,A,N,R=r[10]&&r[10].newLeaderboards.find(r[14])!=null,F,T,q,O=r[10]&&r[10].newColumns.find(r[13])!=null,P,B,M,H;l=new rt({props:{datasetName:null}});let I=r[1]&&r[0]&&Se(),h=$&&Be(r);function z(n,v){return n[0]==null?ft:dt}let i=z(r),p=i(r),m=R&&je(r),D=O&&Ae();return{c(){t=g("div"),te(l.$$.fragment),s=L(),I&&I.c(),a=L(),d=g("div"),b=L(),f=g("div"),h&&h.c(),U=L(),k=g("div"),A=g("div"),p.c(),N=L(),m&&m.c(),F=L(),T=g("input"),q=L(),D&&D.c(),this.h()},l(n){t=y(n,"DIV",{class:!0});var v=E(t);le(l.$$.fragment,v),s=V(v),I&&I.l(v),a=V(v),d=y(v,"DIV",{class:!0}),E(d).forEach(o),b=V(v),f=y(v,"DIV",{class:!0});var Y=E(f);h&&h.l(Y),Y.forEach(o),v.forEach(o),U=V(n),k=y(n,"DIV",{id:!0,class:!0});var S=E(k);A=y(S,"DIV",{class:!0});var x=E(A);p.l(x),x.forEach(o),N=V(S),m&&m.l(S),F=V(S),T=y(S,"INPUT",{type:!0,class:!0,placeholder:!0,name:!0,id:!0}),q=V(S),D&&D.l(S),S.forEach(o),this.h()},h(){c(d,"class","divider w-[50%] mx-auto"),c(f,"class","prose text-justify mx-auto"),c(t,"class",""),c(A,"class","font-bold my-auto mx-20 text-2xl"),c(T,"type","text"),c(T,"class","input input-primary input-sm w-60 my-auto"),c(T,"placeholder","Filter ðŸ”Ž"),c(T,"name","filter"),c(T,"id","filter"),re(T,"hidden",r[0]==null),c(k,"id","leaderboard-header"),c(k,"class","flex justify-center my-4")},m(n,v){w(n,t,v),ae(l,t,null),_(t,s),I&&I.m(t,null),_(t,a),_(t,d),_(t,b),_(t,f),h&&h.m(f,null),w(n,U,v),w(n,k,v),_(k,A),p.m(A,null),_(k,N),m&&m.m(k,null),_(k,F),_(k,T),r[17](T),_(k,q),D&&D.m(k,null),B=!0,M||(H=ue(T,"input",r[18]),M=!0)},p(n,v){n[1]&&n[0]?I||(I=Se(),I.c(),I.m(t,a)):I&&(I.d(1),I=null),v&4&&($=n[2]&&!n[2].includes("404")),$?h?h.p(n,v):(h=Be(n),h.c(),h.m(f,null)):h&&(h.d(1),h=null),i===(i=z(n))&&p?p.p(n,v):(p.d(1),p=i(n),p&&(p.c(),p.m(A,null))),v&1536&&(R=n[10]&&n[10].newLeaderboards.find(n[14])!=null),R?m?m.p(n,v):(m=je(n),m.c(),m.m(k,F)):m&&(m.d(1),m=null),(!B||v&1)&&re(T,"hidden",n[0]==null),v&1536&&(O=n[10]&&n[10].newColumns.find(n[13])!=null),O?D||(D=Ae(),D.c(),D.m(k,null)):D&&(D.d(1),D=null)},i(n){B||(W(l.$$.fragment,n),n&&Ie(()=>{B&&(C||(C=ce(t,be,{},!0)),C.run(1))}),n&&Ie(()=>{B&&(P||(P=ce(k,be,{},!0)),P.run(1))}),B=!0)},o(n){K(l.$$.fragment,n),n&&(C||(C=ce(t,be,{},!1)),C.run(0)),n&&(P||(P=ce(k,be,{},!1)),P.run(0)),B=!1},d(n){n&&o(t),se(l),I&&I.d(),h&&h.d(),n&&C&&C.end(),n&&o(U),n&&o(k),p.d(),m&&m.d(),r[17](null),D&&D.d(),n&&P&&P.end(),M=!1,H()}}}function it(r){let t,l,s;return{c(){t=g("div"),l=g("div"),s=g("span"),this.h()},l(a){t=y(a,"DIV",{class:!0});var d=E(t);l=y(d,"DIV",{class:!0});var b=E(l);s=y(b,"SPAN",{class:!0}),E(s).forEach(o),b.forEach(o),d.forEach(o),this.h()},h(){c(s,"class","loading loading-infinity loading-lg text-primary"),c(l,"class","flex justify-center"),c(t,"class","h-screen w-screen flex flex-col justify-center")},m(a,d){w(a,t,d),_(t,l),_(l,s)},p:ne,i:ne,o:ne,d(a){a&&o(t)}}}function Se(r){let t,l,s;return{c(){t=g("main"),l=g("h1"),s=X("Dataset: Systems"),this.h()},l(a){t=y(a,"MAIN",{class:!0});var d=E(t);l=y(d,"H1",{});var b=E(l);s=Z(b,"Dataset: Systems"),b.forEach(o),d.forEach(o),this.h()},h(){c(t,"class","prose text-justify mx-auto mt-16")},m(a,d){w(a,t,d),_(t,l),_(l,s)},d(a){a&&o(t)}}}function Be(r){let t,l,s;return{c(){t=new Pe(!1),l=L(),s=g("div"),this.h()},l(a){t=Fe(a,!1),l=V(a),s=y(a,"DIV",{class:!0}),E(s).forEach(o),this.h()},h(){t.a=l,c(s,"class","divider w-[50%] mx-auto")},m(a,d){t.m(r[2],a,d),w(a,l,d),w(a,s,d)},p(a,d){d&4&&t.p(a[2])},d(a){a&&t.d(),a&&o(l),a&&o(s)}}}function dt(r){let t;return{c(){t=X("Leaderboard")},l(l){t=Z(l,"Leaderboard")},m(l,s){w(l,t,s)},p:ne,d(l){l&&o(t)}}}function ft(r){let t,l,s,a,d,b;return{c(){t=X(`No Leaderboard for this dataset yet

				`),l=g("div"),s=g("button"),a=X("Submit a new leaderboard"),this.h()},l(f){t=Z(f,`No Leaderboard for this dataset yet

				`),l=y(f,"DIV",{class:!0});var $=E(l);s=y($,"BUTTON",{class:!0});var C=E(s);a=Z(C,"Submit a new leaderboard"),C.forEach(o),$.forEach(o),this.h()},h(){c(s,"class","btn btn-accent btn-wide"),c(l,"class","flex justify-center")},m(f,$){w(f,t,$),w(f,l,$),_(l,s),_(s,a),d||(b=ue(s,"click",r[15]),d=!0)},p:ne,d(f){f&&o(t),f&&o(l),d=!1,b()}}}function je(r){let t,l,s,a,d;return{c(){t=g("div"),l=g("button"),s=X("Delete"),this.h()},l(b){t=y(b,"DIV",{class:!0});var f=E(t);l=y(f,"BUTTON",{class:!0});var $=E(l);s=Z($,"Delete"),$.forEach(o),f.forEach(o),this.h()},h(){c(l,"class","btn btn-warning"),c(t,"class","my-auto mx-4")},m(b,f){w(b,t,f),_(t,l),_(l,s),a||(d=ue(l,"click",r[16]),a=!0)},p:ne,d(b){b&&o(t),a=!1,d()}}}function Ae(r){let t,l;return{c(){t=g("div"),l=X("Right click on your new column to delete it"),this.h()},l(s){t=y(s,"DIV",{class:!0});var a=E(t);l=Z(a,"Right click on your new column to delete it"),a.forEach(o),this.h()},h(){c(t,"class","mx-4 italic text-xs my-auto text-gray-400")},m(s,a){w(s,t,a),_(t,l)},d(s){s&&o(t)}}}function Re(r){let t,l;return{c(){t=new Pe(!1),l=$e(),this.h()},l(s){t=Fe(s,!1),l=$e(),this.h()},h(){t.a=l},m(s,a){t.m(r[3],s,a),w(s,l,a)},p(s,a){a&8&&t.p(s[3])},d(s){s&&o(l),s&&t.d()}}}function ut(r){let t,l,s,a,d,b,f,$,C,U,k,A,N,R,F,T,q,O,P,B,M,H,I,h,z,i,p,m,D,n,v,Y,S,x,ge;const ye=[it,ot],J=[];function ke(e,u){return e[6]?0:1}t=ke(r),l=J[t]=ye[t](r);let j=r[3]&&Re(r);return h=new We({props:{dataset:r[9].params.db+"/"+r[9].params.dataset}}),i=new Xe({props:{dataset:r[9].params.db+"/"+r[9].params.dataset}}),m=new Ze({props:{dataset:r[9].params.db+"/"+r[9].params.dataset}}),n=new Qe({props:{dataset:r[9].params.db+"/"+r[9].params.dataset}}),Y=new xe({}),{c(){l.c(),s=L(),a=g("div"),d=g("div"),b=g("div"),f=L(),$=g("div"),C=g("button"),U=X("+"),A=L(),N=g("div"),R=g("button"),F=X("+"),q=L(),O=g("div"),j&&j.c(),P=L(),B=g("div"),M=L(),H=g("link"),I=L(),te(h.$$.fragment),z=L(),te(i.$$.fragment),p=L(),te(m.$$.fragment),D=L(),te(n.$$.fragment),v=L(),te(Y.$$.fragment),this.h()},l(e){l.l(e),s=V(e),a=y(e,"DIV",{id:!0,class:!0});var u=E(a);d=y(u,"DIV",{class:!0});var ee=E(d);b=y(ee,"DIV",{}),E(b).forEach(o),ee.forEach(o),f=V(u),$=y(u,"DIV",{class:!0});var oe=E($);C=y(oe,"BUTTON",{class:!0});var ie=E(C);U=Z(ie,"+"),ie.forEach(o),oe.forEach(o),u.forEach(o),A=V(e),N=y(e,"DIV",{class:!0});var de=E(N);R=y(de,"BUTTON",{class:!0});var fe=E(R);F=Z(fe,"+"),fe.forEach(o),de.forEach(o),q=V(e),O=y(e,"DIV",{class:!0});var De=E(O);j&&j.l(De),De.forEach(o),P=V(e),B=y(e,"DIV",{class:!0}),E(B).forEach(o),M=V(e);const Ee=qe("svelte-1256386",Ve.head);H=y(Ee,"LINK",{href:!0,rel:!0}),Ee.forEach(o),I=V(e),le(h.$$.fragment,e),z=V(e),le(i.$$.fragment,e),p=V(e),le(m.$$.fragment,e),D=V(e),le(n.$$.fragment,e),v=V(e),le(Y.$$.fragment,e),this.h()},h(){c(d,"class","overflow-x-scroll w-full"),c(C,"class","btn btn-secondary h-full"),c($,"class","mx-2 flex items-center justify-center bg-reg-400"),c(a,"id","leaderboard-wrapper"),c(a,"class",k=me(`w-[80%] mx-auto ${r[7]} flex`)+" svelte-1w85bai"),re(a,"hidden",r[0]==null||r[8]==null),c(R,"class","btn btn-primary w-full"),c(N,"class",T=me(`my-2 w-[80%] mx-auto ${r[7]}`)+" svelte-1w85bai"),re(N,"hidden",r[0]==null),c(O,"class","prose text-justify mx-auto"),c(B,"class","my-20"),c(H,"href","https://unpkg.com/tabulator-tables@5.5.0/dist/css/tabulator_bootstrap5.min.css"),c(H,"rel","stylesheet")},m(e,u){J[t].m(e,u),w(e,s,u),w(e,a,u),_(a,d),_(d,b),r[19](b),_(a,f),_(a,$),_($,C),_(C,U),w(e,A,u),w(e,N,u),_(N,R),_(R,F),w(e,q,u),w(e,O,u),j&&j.m(O,null),w(e,P,u),w(e,B,u),w(e,M,u),_(Ve.head,H),w(e,I,u),ae(h,e,u),w(e,z,u),ae(i,e,u),w(e,p,u),ae(m,e,u),w(e,D,u),ae(n,e,u),w(e,v,u),ae(Y,e,u),S=!0,x||(ge=[ue(C,"click",r[11]),ue(R,"click",r[12])],x=!0)},p(e,[u]){let ee=t;t=ke(e),t===ee?J[t].p(e,u):(Je(),K(J[ee],1,1,()=>{J[ee]=null}),Me(),l=J[t],l?l.p(e,u):(l=J[t]=ye[t](e),l.c()),W(l,1),l.m(s.parentNode,s)),(!S||u&128&&k!==(k=me(`w-[80%] mx-auto ${e[7]} flex`)+" svelte-1w85bai"))&&c(a,"class",k),(!S||u&385)&&re(a,"hidden",e[0]==null||e[8]==null),(!S||u&128&&T!==(T=me(`my-2 w-[80%] mx-auto ${e[7]}`)+" svelte-1w85bai"))&&c(N,"class",T),(!S||u&129)&&re(N,"hidden",e[0]==null),e[3]?j?j.p(e,u):(j=Re(e),j.c(),j.m(O,null)):j&&(j.d(1),j=null);const oe={};u&512&&(oe.dataset=e[9].params.db+"/"+e[9].params.dataset),h.$set(oe);const ie={};u&512&&(ie.dataset=e[9].params.db+"/"+e[9].params.dataset),i.$set(ie);const de={};u&512&&(de.dataset=e[9].params.db+"/"+e[9].params.dataset),m.$set(de);const fe={};u&512&&(fe.dataset=e[9].params.db+"/"+e[9].params.dataset),n.$set(fe)},i(e){S||(W(l),W(h.$$.fragment,e),W(i.$$.fragment,e),W(m.$$.fragment,e),W(n.$$.fragment,e),W(Y.$$.fragment,e),S=!0)},o(e){K(l),K(h.$$.fragment,e),K(i.$$.fragment,e),K(m.$$.fragment,e),K(n.$$.fragment,e),K(Y.$$.fragment,e),S=!1},d(e){J[t].d(e),e&&o(s),e&&o(a),r[19](null),e&&o(A),e&&o(N),e&&o(q),e&&o(O),j&&j.d(),e&&o(P),e&&o(B),e&&o(M),o(H),e&&o(I),se(h,e),e&&o(z),se(i,e),e&&o(p),se(m,e),e&&o(D),se(n,e),e&&o(v),se(Y,e),x=!1,Ye(ge)}}}function mt(r,t,l){let s,a,d;_e(r,G,i=>l(8,s=i)),_e(r,Ke,i=>l(9,a=i)),_e(r,Te,i=>l(10,d=i));const b=at;let f,$,C,U,k=!1,A=!1,N,R,F=!0,T="";ze(async()=>{document.body.onclick=p=>{var m;(m=document.getElementById("delete-column-button"))==null||m.remove()},Q(G,s=null,s);const i=await et();if(l(0,f=i.parsedTable),l(1,$=i.prefaceData),l(2,C=i.parsedInfo),l(3,U=i.parsedFooter),l(7,T="fade-in"),f){let p=we();p=he(f,p);try{Q(G,s=new b(N,{data:f,layout:"fitColumns",height:"500",reactiveData:!0,columns:p,movableColumns:!0}),s),ve(a)}catch{console.log("some error occured while loading table's data; likely got cancelled"),Q(G,s=null,s)}}else if(d){let p=d;if(p.newLeaderboards.find(D=>D.dataset=="systems")){console.log("Leaderboard found in pr changes cookie");const D=Le.parse(p.newLeaderboards[p.newLeaderboards.length-1].data,{mangle:!1,headerIds:!1});if(l(0,f=Ne(D).results[0]),f!=null){console.log("Table found in pr changes cookie");let n=we();n=he(f,n);try{Q(G,s=new b(N,{data:f,layout:"fitColumns",height:"500",reactiveData:!0,columns:n,movableColumns:!0}),s),ve(a)}catch{console.log("some error occured while loading table's data; likely got cancelled"),Q(G,s=null,s)}}else console.log("No table found")}else{nt("No leaderboard found","There is no leaderboard for this dataset"),l(6,F=!1),k=!1,A=!1;return}l(6,F=!1)}else console.log("No table found");l(6,F=!1)});function q(){pe(`add-new-column-${a.params.db}/${a.params.dataset}`)}function O(){pe(`add-new-row-${a.params.db}/${a.params.dataset}`)}Te.subscribe(i=>{if(i){if(i.lastChange==="column"){let p=i.newColumns[i.newColumns.length-1];console.log("Adding new column",p),tt(p,a)}else if(i.lastChange==="leaderboard"){const p=Le.parse(i.newLeaderboards[i.newLeaderboards.length-1].data,{mangle:!1,headerIds:!1});if(l(0,f=Ne(p).results[0]),f){let m=we();m=he(f,m);try{Q(G,s=new b(N,{data:f,layout:"fitColumns",height:"500",reactiveData:!0,columns:m,movableColumns:!0}),s),ve(a)}catch{console.log("some error occured while loading table's data; likely got cancelled"),Q(G,s=null,s)}}else console.log("No table found - from currentPRChanges subscription");l(6,F=!1)}i.lastChange!==null&&lt(i),A&&!k&&(s==null||s.redraw(!0)),G.set(s)}});const P=i=>i.dataset===`${a.params.db}/${a.params.dataset}`,B=i=>i.dataset===`${a.params.db}/${a.params.dataset}`,M=()=>{pe(`add-new-leaderboard-${a.params.db}/${a.params.dataset}`)},H=()=>{pe("delete-new-leaderboard-"+a.params.db+"/"+a.params.dataset)};function I(i){Ce[i?"unshift":"push"](()=>{R=i,l(5,R)})}const h=i=>{st(i)};function z(i){Ce[i?"unshift":"push"](()=>{N=i,l(4,N)})}return[f,$,C,U,N,R,F,T,s,a,d,q,O,P,B,M,H,I,h,z]}class wt extends Oe{constructor(t){super(),Ue(this,t,mt,ut,He,{})}}export{wt as component};
