import{S as Oe,i as qe,s as Me,a as T,k as y,q as z,y as ae,c as V,l as D,m as I,h as r,r as G,W as Ye,z as te,n as c,X as pe,R as re,b as E,C as _,A as le,D as ce,d as Z,f as ze,g as Q,B as se,G as Ge,H as me,o as Je,J as x,Y as Ke,Z as Fe,e as ve,_ as He,v as We,w as Ie,O as $e,P as be,F as oe,u as Xe}from"../chunks/index.487cb5f4.js";import{p as Ze}from"../chunks/stores.d9ac07b6.js";import{A as Qe,a as xe,b as ea,c as aa,S as ta,l as la,e as we,s as ge,d as sa,p as Ne,f as ra,T as oa,g as ke,h as na,D as ia,t as Le,i as Te}from"../chunks/tabulator_esm.137e742d.js";import{a as W,c as Ve,t as _e,n as da}from"../chunks/lastParsedTable.0b0b1636.js";import{m as Be}from"../chunks/marked.esm.8a49593e.js";import{f as he}from"../chunks/index.c71e4220.js";const{document:Re}=Ke;function fa(s){let t,a,l,o,h,d,u,v,m,A,S,p,b,B,U=s[9]&&s[9].newLeaderboards.find(s[13])!=null,F,R,H,J=s[9]&&s[9].newColumns.find(s[12])!=null,j,O,M,K;a=new ia({props:{datasetName:s[8].params.db}});let C=s[1]&&s[0]&&Ae(s),N=s[2]&&Se(s);function i(n,w){return n[0]==null?ca:ma}let L=i(s),k=L(s),$=U&&Ue(s),g=J&&je();return{c(){t=y("div"),ae(a.$$.fragment),l=T(),C&&C.c(),o=T(),h=y("div"),d=T(),u=y("div"),N&&N.c(),m=T(),A=y("div"),S=T(),p=y("div"),b=y("div"),k.c(),B=T(),$&&$.c(),F=T(),R=y("input"),H=T(),g&&g.c(),this.h()},l(n){t=D(n,"DIV",{class:!0});var w=I(t);te(a.$$.fragment,w),l=V(w),C&&C.l(w),o=V(w),h=D(w,"DIV",{class:!0}),I(h).forEach(r),d=V(w),u=D(w,"DIV",{class:!0});var q=I(u);N&&N.l(q),q.forEach(r),w.forEach(r),m=V(n),A=D(n,"DIV",{class:!0}),I(A).forEach(r),S=V(n),p=D(n,"DIV",{id:!0,class:!0});var Y=I(p);b=D(Y,"DIV",{class:!0});var ne=I(b);k.l(ne),ne.forEach(r),B=V(Y),$&&$.l(Y),F=V(Y),R=D(Y,"INPUT",{type:!0,class:!0,placeholder:!0,name:!0,id:!0}),H=V(Y),g&&g.l(Y),Y.forEach(r),this.h()},h(){c(h,"class","divider w-[50%] mx-auto"),c(u,"class","prose text-justify mx-auto"),c(t,"class",""),c(A,"class","divider w-[50%] mx-auto"),c(b,"class","font-bold my-auto mx-20 text-2xl"),c(R,"type","text"),c(R,"class","input input-primary input-sm w-60 my-auto"),c(R,"placeholder","Filter 🔎"),c(R,"name","filter"),c(R,"id","filter"),re(R,"hidden",s[0]==null),c(p,"id","leaderboard-header"),c(p,"class","flex justify-center my-4")},m(n,w){E(n,t,w),le(a,t,null),_(t,l),C&&C.m(t,null),_(t,o),_(t,h),_(t,d),_(t,u),N&&N.m(u,null),E(n,m,w),E(n,A,w),E(n,S,w),E(n,p,w),_(p,b),k.m(b,null),_(p,B),$&&$.m(p,null),_(p,F),_(p,R),s[16](R),_(p,H),g&&g.m(p,null),O=!0,M||(K=ce(R,"input",s[17]),M=!0)},p(n,w){const q={};w&256&&(q.datasetName=n[8].params.db),a.$set(q),n[1]&&n[0]?C?C.p(n,w):(C=Ae(n),C.c(),C.m(t,o)):C&&(C.d(1),C=null),n[2]?N?N.p(n,w):(N=Se(n),N.c(),N.m(u,null)):N&&(N.d(1),N=null),L===(L=i(n))&&k?k.p(n,w):(k.d(1),k=L(n),k&&(k.c(),k.m(b,null))),w&768&&(U=n[9]&&n[9].newLeaderboards.find(n[13])!=null),U?$?$.p(n,w):($=Ue(n),$.c(),$.m(p,F)):$&&($.d(1),$=null),(!O||w&1)&&re(R,"hidden",n[0]==null),w&768&&(J=n[9]&&n[9].newColumns.find(n[12])!=null),J?g||(g=je(),g.c(),g.m(p,null)):g&&(g.d(1),g=null)},i(n){O||(Q(a.$$.fragment,n),n&&$e(()=>{O&&(v||(v=be(t,he,{},!0)),v.run(1))}),n&&$e(()=>{O&&(j||(j=be(p,he,{},!0)),j.run(1))}),O=!0)},o(n){Z(a.$$.fragment,n),n&&(v||(v=be(t,he,{},!1)),v.run(0)),n&&(j||(j=be(p,he,{},!1)),j.run(0)),O=!1},d(n){n&&r(t),se(a),C&&C.d(),N&&N.d(),n&&v&&v.end(),n&&r(m),n&&r(A),n&&r(S),n&&r(p),k.d(),$&&$.d(),s[16](null),g&&g.d(),n&&j&&j.end(),M=!1,K()}}}function ua(s){let t,a,l;return{c(){t=y("div"),a=y("div"),l=y("span"),this.h()},l(o){t=D(o,"DIV",{class:!0});var h=I(t);a=D(h,"DIV",{class:!0});var d=I(a);l=D(d,"SPAN",{class:!0}),I(l).forEach(r),d.forEach(r),h.forEach(r),this.h()},h(){c(l,"class","loading loading-infinity loading-lg text-primary"),c(a,"class","flex justify-center"),c(t,"class","h-screen w-screen flex flex-col justify-center")},m(o,h){E(o,t,h),_(t,a),_(a,l)},p:oe,i:oe,o:oe,d(o){o&&r(t)}}}function Ae(s){let t,a,l,o=s[1].name+"",h,d,u,v,m,A,S;return{c(){t=y("main"),a=y("h1"),l=z("Dataset: "),h=z(o),d=T(),u=y("h5"),v=z("Dataset URL: "),m=y("a"),A=z("Link"),this.h()},l(p){t=D(p,"MAIN",{class:!0});var b=I(t);a=D(b,"H1",{});var B=I(a);l=G(B,"Dataset: "),h=G(B,o),B.forEach(r),d=V(b),u=D(b,"H5",{});var U=I(u);v=G(U,"Dataset URL: "),m=D(U,"A",{href:!0});var F=I(m);A=G(F,"Link"),F.forEach(r),U.forEach(r),b.forEach(r),this.h()},h(){c(m,"href",S=s[1].datasetUrl),c(t,"class","prose text-justify mx-auto mt-16")},m(p,b){E(p,t,b),_(t,a),_(a,l),_(a,h),_(t,d),_(t,u),_(u,v),_(u,m),_(m,A)},p(p,b){b&2&&o!==(o=p[1].name+"")&&Xe(h,o),b&2&&S!==(S=p[1].datasetUrl)&&c(m,"href",S)},d(p){p&&r(t)}}}function Se(s){let t,a;return{c(){t=new Fe(!1),a=ve(),this.h()},l(l){t=He(l,!1),a=ve(),this.h()},h(){t.a=a},m(l,o){t.m(s[2],l,o),E(l,a,o)},p(l,o){o&4&&t.p(l[2])},d(l){l&&r(a),l&&t.d()}}}function ma(s){let t;return{c(){t=z("Leaderboard")},l(a){t=G(a,"Leaderboard")},m(a,l){E(a,t,l)},p:oe,d(a){a&&r(t)}}}function ca(s){let t,a,l,o,h,d;return{c(){t=z(`No Leaderboard for this dataset yet

				`),a=y("div"),l=y("button"),o=z("Submit a new leaderboard"),this.h()},l(u){t=G(u,`No Leaderboard for this dataset yet

				`),a=D(u,"DIV",{class:!0});var v=I(a);l=D(v,"BUTTON",{class:!0});var m=I(l);o=G(m,"Submit a new leaderboard"),m.forEach(r),v.forEach(r),this.h()},h(){c(l,"class","btn btn-accent btn-wide"),c(a,"class","flex justify-center")},m(u,v){E(u,t,v),E(u,a,v),_(a,l),_(l,o),h||(d=ce(l,"click",s[14]),h=!0)},p:oe,d(u){u&&r(t),u&&r(a),h=!1,d()}}}function Ue(s){let t,a,l,o,h;return{c(){t=y("div"),a=y("button"),l=z("Delete"),this.h()},l(d){t=D(d,"DIV",{class:!0});var u=I(t);a=D(u,"BUTTON",{class:!0});var v=I(a);l=G(v,"Delete"),v.forEach(r),u.forEach(r),this.h()},h(){c(a,"class","btn btn-warning"),c(t,"class","my-auto mx-4")},m(d,u){E(d,t,u),_(t,a),_(a,l),o||(h=ce(a,"click",s[15]),o=!0)},p:oe,d(d){d&&r(t),o=!1,h()}}}function je(s){let t,a;return{c(){t=y("div"),a=z("Right click on your new column to delete it"),this.h()},l(l){t=D(l,"DIV",{class:!0});var o=I(t);a=G(o,"Right click on your new column to delete it"),o.forEach(r),this.h()},h(){c(t,"class","mx-4 italic text-xs my-auto text-gray-400")},m(l,o){E(l,t,o),_(t,a)},d(l){l&&r(t)}}}function Pe(s){let t,a;return{c(){t=new Fe(!1),a=ve(),this.h()},l(l){t=He(l,!1),a=ve(),this.h()},h(){t.a=a},m(l,o){t.m(s[3],l,o),E(l,a,o)},p(l,o){o&8&&t.p(l[3])},d(l){l&&r(a),l&&t.d()}}}function pa(s){let t,a,l,o,h,d,u,v,m,A,S,p,b,B,U,F,R,H,J,j,O,M,K,C,N,i,L,k,$,g,n,w,q,Y,ne;const ye=[ua,fa],X=[];function De(e,f){return e[6]?0:1}t=De(s),a=X[t]=ye[t](s);let P=s[3]&&Pe(s);return C=new Qe({props:{dataset:s[8].params.db+"/"+s[8].params.dataset}}),i=new xe({props:{dataset:s[8].params.db+"/"+s[8].params.dataset}}),k=new ea({props:{dataset:s[8].params.db+"/"+s[8].params.dataset}}),g=new aa({props:{dataset:s[8].params.db+"/"+s[8].params.dataset}}),w=new ta({}),{c(){a.c(),l=T(),o=y("div"),h=y("div"),d=y("div"),u=T(),v=y("div"),m=y("button"),A=z("+"),p=T(),b=y("div"),B=y("button"),U=z("+"),R=T(),H=y("div"),P&&P.c(),J=T(),j=y("div"),O=T(),M=y("link"),K=T(),ae(C.$$.fragment),N=T(),ae(i.$$.fragment),L=T(),ae(k.$$.fragment),$=T(),ae(g.$$.fragment),n=T(),ae(w.$$.fragment),this.h()},l(e){a.l(e),l=V(e),o=D(e,"DIV",{id:!0,class:!0});var f=I(o);h=D(f,"DIV",{class:!0});var ee=I(h);d=D(ee,"DIV",{}),I(d).forEach(r),ee.forEach(r),u=V(f),v=D(f,"DIV",{class:!0});var ie=I(v);m=D(ie,"BUTTON",{class:!0});var de=I(m);A=G(de,"+"),de.forEach(r),ie.forEach(r),f.forEach(r),p=V(e),b=D(e,"DIV",{class:!0});var fe=I(b);B=D(fe,"BUTTON",{class:!0});var ue=I(B);U=G(ue,"+"),ue.forEach(r),fe.forEach(r),R=V(e),H=D(e,"DIV",{class:!0});var Ee=I(H);P&&P.l(Ee),Ee.forEach(r),J=V(e),j=D(e,"DIV",{class:!0}),I(j).forEach(r),O=V(e);const Ce=Ye("svelte-1256386",Re.head);M=D(Ce,"LINK",{href:!0,rel:!0}),Ce.forEach(r),K=V(e),te(C.$$.fragment,e),N=V(e),te(i.$$.fragment,e),L=V(e),te(k.$$.fragment,e),$=V(e),te(g.$$.fragment,e),n=V(e),te(w.$$.fragment,e),this.h()},h(){c(h,"class","overflow-x-scroll w-full"),c(m,"class","btn btn-secondary h-full"),c(v,"class","mx-2 flex items-center justify-center bg-reg-400"),c(o,"id","leaderboard-wrapper"),c(o,"class",S=pe(`w-[80%] mx-auto ${s[7]} flex`)+" svelte-1w85bai"),re(o,"hidden",s[0]==null),c(B,"class","btn btn-primary w-full"),c(b,"class",F=pe(`my-2 w-[80%] mx-auto ${s[7]}`)+" svelte-1w85bai"),re(b,"hidden",s[0]==null),c(H,"class","prose text-justify mx-auto"),c(j,"class","my-20"),c(M,"href","https://unpkg.com/tabulator-tables@5.5.0/dist/css/tabulator_bootstrap5.min.css"),c(M,"rel","stylesheet")},m(e,f){X[t].m(e,f),E(e,l,f),E(e,o,f),_(o,h),_(h,d),s[18](d),_(o,u),_(o,v),_(v,m),_(m,A),E(e,p,f),E(e,b,f),_(b,B),_(B,U),E(e,R,f),E(e,H,f),P&&P.m(H,null),E(e,J,f),E(e,j,f),E(e,O,f),_(Re.head,M),E(e,K,f),le(C,e,f),E(e,N,f),le(i,e,f),E(e,L,f),le(k,e,f),E(e,$,f),le(g,e,f),E(e,n,f),le(w,e,f),q=!0,Y||(ne=[ce(m,"click",s[10]),ce(B,"click",s[11])],Y=!0)},p(e,[f]){let ee=t;t=De(e),t===ee?X[t].p(e,f):(We(),Z(X[ee],1,1,()=>{X[ee]=null}),ze(),a=X[t],a?a.p(e,f):(a=X[t]=ye[t](e),a.c()),Q(a,1),a.m(l.parentNode,l)),(!q||f&128&&S!==(S=pe(`w-[80%] mx-auto ${e[7]} flex`)+" svelte-1w85bai"))&&c(o,"class",S),(!q||f&129)&&re(o,"hidden",e[0]==null),(!q||f&128&&F!==(F=pe(`my-2 w-[80%] mx-auto ${e[7]}`)+" svelte-1w85bai"))&&c(b,"class",F),(!q||f&129)&&re(b,"hidden",e[0]==null),e[3]?P?P.p(e,f):(P=Pe(e),P.c(),P.m(H,null)):P&&(P.d(1),P=null);const ie={};f&256&&(ie.dataset=e[8].params.db+"/"+e[8].params.dataset),C.$set(ie);const de={};f&256&&(de.dataset=e[8].params.db+"/"+e[8].params.dataset),i.$set(de);const fe={};f&256&&(fe.dataset=e[8].params.db+"/"+e[8].params.dataset),k.$set(fe);const ue={};f&256&&(ue.dataset=e[8].params.db+"/"+e[8].params.dataset),g.$set(ue)},i(e){q||(Q(a),Q(C.$$.fragment,e),Q(i.$$.fragment,e),Q(k.$$.fragment,e),Q(g.$$.fragment,e),Q(w.$$.fragment,e),q=!0)},o(e){Z(a),Z(C.$$.fragment,e),Z(i.$$.fragment,e),Z(k.$$.fragment,e),Z(g.$$.fragment,e),Z(w.$$.fragment,e),q=!1},d(e){X[t].d(e),e&&r(l),e&&r(o),s[18](null),e&&r(p),e&&r(b),e&&r(R),e&&r(H),P&&P.d(),e&&r(J),e&&r(j),e&&r(O),r(M),e&&r(K),se(C,e),e&&r(N),se(i,e),e&&r(L),se(k,e),e&&r($),se(g,e),e&&r(n),se(w,e),Y=!1,Ge(ne)}}}function ba(s,t,a){let l,o,h,d,u;me(s,W,i=>a(19,l=i)),me(s,Le,i=>a(20,o=i)),me(s,Te,i=>a(21,h=i)),me(s,Ze,i=>a(8,d=i)),me(s,Ve,i=>a(9,u=i));const v=oa;let m,A,S,p,b,B,U=!0,F="";Je(async()=>{document.body.onclick=L=>{var k;(k=document.getElementById("delete-column-button"))==null||k.remove()},x(W,l=null,l);const i=await la(d.params);if(a(0,m=i.parsedTable),a(1,A=i.prefaceData),a(2,S=i.parsedInfo),a(3,p=i.parsedFooter),a(7,F="fade-in"),m){let L=ke();L=we(m,L);try{x(W,l=new v(b,{data:m,layout:"fitColumns",height:"500",reactiveData:!0,columns:L,movableColumns:!0}),l),ge(d)}catch{console.log("some error occured while loading table's data; likely got cancelled"),x(W,l=null,l)}}else if(u){let L=u;if(L.newLeaderboards.find(g=>g.dataset==d.params.db+"/"+d.params.dataset))console.log("Leaderboard found in pr changes cookie");else{da("No leaderboard found","There is no leaderboard for this dataset"),a(6,U=!1),Le.set(!1),Te.set(!1);return}const $=Be.parse(L.newLeaderboards[L.newLeaderboards.length-1].data,{mangle:!1,headerIds:!1});if(a(0,m=Ne($).results[0]),m!=null){console.log("Table found in pr changes cookie");let g=ke();g=we(m,g);try{x(W,l=new v(b,{data:m,layout:"fitColumns",height:"500",reactiveData:!0,columns:g,movableColumns:!0}),l),ge(d)}catch{console.log("some error occured while loading table's data; likely got cancelled"),x(W,l=null,l)}}else console.log("No table found");a(6,U=!1)}else console.log("No table found");a(6,U=!1)});function R(){_e(`add-new-column-${d.params.db}/${d.params.dataset}`)}function H(){_e(`add-new-row-${d.params.db}/${d.params.dataset}`)}Ve.subscribe(i=>{if(i){if(console.log("Changes detected",i),i.lastChange==="column"){let L=i.newColumns[i.newColumns.length-1];console.log("Adding new column",L),sa(L,d)}else if(i.lastChange==="leaderboard"){const L=Be.parse(i.newLeaderboards[i.newLeaderboards.length-1].data,{mangle:!1,headerIds:!1});if(a(0,m=Ne(L).results[0]),m){let k=ke();k=we(m,k);try{x(W,l=new v(b,{data:m,layout:"fitColumns",height:"500",reactiveData:!0,columns:k,movableColumns:!0}),l),ge(d)}catch{console.log("some error occured while loading table's data; likely got cancelled"),x(W,l=null,l)}}else console.log("No table found - from currentPRChanges subscription");a(6,U=!1)}i.lastChange!==null&&ra(i),h&&!o&&(l==null||l.redraw(!0)),W.set(l)}});const J=i=>i.dataset===`${d.params.db}/${d.params.dataset}`,j=i=>i.dataset===`${d.params.db}/${d.params.dataset}`,O=()=>{_e(`add-new-leaderboard-${d.params.db}/${d.params.dataset}`)},M=()=>{_e("delete-new-leaderboard-"+d.params.db+"/"+d.params.dataset)};function K(i){Ie[i?"unshift":"push"](()=>{B=i,a(5,B)})}const C=i=>{na(i)};function N(i){Ie[i?"unshift":"push"](()=>{b=i,a(4,b)})}return[m,A,S,p,b,B,U,F,d,u,R,H,J,j,O,M,K,C,N]}class ya extends Oe{constructor(t){super(),qe(this,t,ba,pa,Me,{})}}export{ya as component};
